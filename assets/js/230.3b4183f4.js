(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{653:function(t,a,s){"use strict";s.r(a);var e=s(15),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"小程序宿主环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序宿主环境"}},[t._v("#")]),t._v(" 小程序宿主环境")]),t._v(" "),s("h2",{attrs:{id:"微信小程序注册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序注册"}},[t._v("#")]),t._v(" 微信小程序注册")]),t._v(" "),s("p",[t._v("注册时可选择类型：订阅号、服务号、小程序、企业微信")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("每个邮箱仅能注册一个小程序。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("个人类型小程序：无法使用微信支付、无法使用卡包功能")])]),t._v(" "),s("h2",{attrs:{id:"基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),s("p",[t._v("微信客户端给小程序提供的运行环境为宿主环境，小程序借助宿主环境提供的能力，可以完成许多普通网页无法完成的功能")]),t._v(" "),s("p",[t._v("小程序的运行环境分为：")]),t._v(" "),s("ul",[s("li",[t._v("逻辑层（JS）")]),t._v(" "),s("li",[t._v("渲染层（WXML、WXSS）")])]),t._v(" "),s("p",[t._v("渲染层和逻辑层分别有两个不同的线程管理，渲染层使用了WebView进行渲染，逻辑层使用了JsCore线程运行JS脚本")]),t._v(" "),s("blockquote",[s("p",[t._v("一个小程序存在多个界面，所以也存在多个webview线程，可以理解为：一个界面对应一个webview线程")])]),t._v(" "),s("p",[t._v("示意图")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://res.wx.qq.com/wxdoc/dist/assets/img/4-1.ad156d1c.png",alt:"示意图"}})]),t._v(" "),s("h2",{attrs:{id:"运行环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行环境"}},[t._v("#")]),t._v(" 运行环境")]),t._v(" "),s("p",[t._v("整个小程序只有一个 App 实例，是全部页面共享的。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onLaunch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小程序启动之后触发")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"页面page"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#页面page"}},[t._v("#")]),t._v(" 页面Page")]),t._v(" "),s("p",[t._v("Page 是一个页面构造器，这个构造器就生成了一个页面。在生成页面的时候，小程序框架会把 data 数据和 index.wxml 一起渲染出最终的结构，于是就得到了你看到的小程序的样子。")]),t._v(" "),s("p",[t._v("在渲染完界面之后，页面实例就会收到一个 onLoad 的回调，你可以在这个回调处理你的逻辑。")]),t._v(" "),s("h3",{attrs:{id:"组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),s("p",[t._v("小程序提供了丰富的基础组件给开发者，开发者可以像搭积木一样，组合各种组件拼合成自己的小程序。")]),t._v(" "),s("h3",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("p",[t._v("为了让开发者可以很方便的调起微信提供的能力，例如获取用户信息、微信支付等等，小程序提供了很多 API 给开发者去使用。")]),t._v(" "),s("h3",{attrs:{id:"场景值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#场景值"}},[t._v("#")]),t._v(" 场景值")]),t._v(" "),s("p",[t._v("场景值用来描述用户进入小程序的路径。完整场景值的含义请查看"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("场景值列表"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("由于Android系统限制，目前无法获取到按Home将退出到桌面，然后从桌面再次进入小程序的场景值，对于这种情况，会保留上一次的场景值。")]),t._v(" "),s("p",[t._v("小程序获取场景值的方式")]),t._v(" "),s("ul",[s("li",[t._v("在APP的"),s("code",[t._v("onLaunch")]),t._v("和"),s("code",[t._v("onShow")]),t._v("方法中")]),t._v(" "),s("li",[s("code",[t._v("wx.getLaunchOptionsSync")]),t._v("中获取")])])])}),[],!1,null,null,null);a.default=n.exports}}]);