---
title: 常用坐标系
date: 2021-08-25 11:01:11
permalink: /pages/07d42c/
categories:
  - 技术
  - WebGIS
tags:
  - 
---

## 介绍

常用的坐标系主要包括WGS84经纬度投影、WGS84 Web 墨卡托投影、WGS84 UTM 投影、北京54高斯投影、西安80高斯投影、CGCS2000高斯投影、GCJ02经纬度投影、GCJ02 Web 墨卡托投影、BD09 经纬度投影和BD09 Web 墨卡托投影等。

其中，WGS84、WGS84 Web 墨卡托、GCJ02和BD09是近年来GIS系统（尤其是WebGIS）中的常用坐标系，而西安80、北京54和CGCS2000坐标是测绘中常用的坐标系。

## 基础概念

地理坐标系：为球面坐标。参考平面地是椭圆面，坐标单位：经纬度

投影坐标系：地理坐标系是三维的，我们要在地图或者屏幕上显示就需要转化为二维，因此投影坐标系为平面坐标。参考平面地是水平面，坐标单位：米

地理坐标转化为投影坐标的过程可理解为投影。（投影：将不规则的地球曲面转换为平面）

在地球椭球面和平面之间建立点与点之间函数关系的数学方法，称为地图投影。

显而易见的是，从三维到二维的转化，必然会导致变形和失真，失真是不可避免的，但是不同投影下会有不同的失真，这让我们可以有得选择。常用的投影有等矩矩形投影（Platte Carre）和墨卡托投影（Mercator）

### 墨卡托投影

墨卡托投影就是将三维的地球表示在一个二维平面上的方法之一，也是应用最广泛的方法。

墨卡托投影的过程非常简单，就是将地球展开成一个圆柱，再将圆柱展开成平面(正方形)

[什么是墨卡托投影](https://blog.geohey.com/-ge-xiao-you-xi-rang-ni-che-di-nong-dong-mo-qia-tuo-tou-ying/)

[墨卡托投影动画演示](https://cdn.hujiulong.com/geohey/blog/mercator/play.html)

![墨卡托投影](https://pic1.zhimg.com/80/v2-00991c24c72667fccdab88740ad108e4_720w.jpg)

:::warning
一般看到的墨卡托投影地图都是无法完整显示的，一般都只截取了85度纬度以内的部分，否则会是一个无穷高的图
:::

### Web Map开发

对于 Web Map 开发人员来说，最熟悉的应该是EPSG:4326 (WGS84) and EPSG:3857(Pseudo-Mercator)，这又是啥呢？

#### 什么是EPSG

EPSP的英文全称是European Petroleum Survey Group，中文名称为欧洲石油调查组织。这个组织成立于1986年，2005年并入IOGP(International Association of Oil & Gas Producers)，中文名称为国际油气生产者协会。

EPSG对世界的每一个地方都制定了地图，但是由于座标系不同，所以地图也各不相同。

[EPSG官方网站](https://epsg.io/)

#### EPSG:4326
WGS84 是目前最流行的地理坐标系统。在国际上，每个坐标系统都会被分配一个`EPSG`代码，`EPSG:4326` 就是 `WGS84` 的代码。GPS是基于WGS84的，所以通常我们得到的坐标数据都是`WGS84`的。一般我们在存储数据时，仍然按`WGS84`存储。

#### EPSG:3857

伪墨卡托投影，也被称为球体墨卡托，`Web Mercator`。它是基于墨卡托投影的，把 WGS84坐标系投影到正方形。我们前面已经知道 WGS84 是基于椭球体的，但是伪墨卡托投影把坐标投影到球体上，这导致两极的失真变大，但是却更容易计算。

另外，伪墨卡托投影还切掉了南北85.051129°纬度以上的地区，以保证整个投影是正方形的。

因为墨卡托投影等正方形特点，在不同层级的图层上物体的形状保持不变，一个正方形可以不断被划分为更多更小的正方形以显示更清晰的细节。很明显，伪墨卡托坐标系是非常适合显示数据，但是不适合存储数据的，因为非常数值非常大，例如：`[27470944.66,8221119.64]`。通常我们使用WGS84存储数据，使用伪墨卡托显示数据。

Web Mercator 最早是由 Google 提出的，当前已经成为 Web Map 的事实标准。但是也许是由于上面”伪“的原因，最初 Web Mercator 被拒绝分配EPSG 代码。于是大家普遍使用 EPSG:900913（Google的数字变形） 的非官方代码来代表它。直到2008年，才被分配了EPSG:3785的代码，但在同一年没多久，又被弃用，重新分配了 EPSG:3857 的正式代码，使用至今。


## 常用坐标系

### 国际标准坐标系（WGS-84）

一种国际上采用的地心坐标系，坐标原点为地球质心，其地心空间直角坐标系的Z轴指向BIH（国际时间服务机构）1984.O定义的协议地球极（CTP)方向，X轴指向BIH 1984.0的零子午面和CTP赤道的交点，Y轴与Z轴、X轴垂直构成右手坐标系，称为1984年世界大地坐标系统。

该坐标系也叫1984世界大地坐标系

WGS-84为一种国际标准的大地坐标线，是目前GPS全球卫星定位系统使用广泛的坐标系。

![WGS84坐标系](https://img-blog.csdnimg.cn/20190111184410104.jpg)

### WGS-84 Web墨卡托投影

:::warning
Web墨卡托投影不是墨卡托投影
:::

Web墨卡托是2005年谷歌在谷歌地图中首次使用的，当时或更早的Web墨卡托使用者还是称其为世界墨卡托 。

在2008年5月EPSG在6.15版本中正式（可能是谷歌地图取得了巨大成功）给谷歌地图投影赋予 CRS 代号 EPSG:3785（Popular Visualisation CRS / Mercator），这也是Web墨卡托正式被EPSG组织承认（由于Web墨卡托不是标准的地图投影，之前一直没有被EPSG没有收录）。

EPSG于2009年2月9号使用新代号EPSG:3857 代替之前的 EPSG:3785，给谷歌地图投影方法命名为“公共可视化伪墨卡托投影”（PVPM），投影运算方法代号 1024。

至今，EPSG:3857（WGS 84 / Pseudo-Mercator） 代号是web墨卡托的正式代号。

![web墨卡托](https://img-blog.csdnimg.cn/20190111184508778.jpg)

Web墨卡托取得了巨大成功，如今主流的Web地图几乎都使用的Web墨卡托，例如：

- 国外： Google Maps，OpenStreetMap，Bing Map，ArcGIS 和 Heremaps 
- 国内：百度地图、高德地图、腾讯地图和天地图等也是基于Web墨卡托

由于**国内政策**的原因，国内地图会有加密要求，一般有两种情况，

- 第一种是在 Web墨卡托的基础上经过国家标准加密的国标02坐标系（GCJ-02），熟称“火星坐标系”；
- 第二种是在国标的02坐标系上进一步进行加密，如百度地图的BD-09坐标系

<br/>

### GCJ-02经纬度投影

火星坐标系GCJ-02也叫国测局坐标系

GCJ-02是由中国国家测绘局（G表示Guojia国家，C表示Cehui测绘，J表示局）制订的地理信息系统的坐标系统。

它其实就是对真实坐标系统进行人为的加偏处理，按照特殊的算法，将真实的坐标加密成虚假的坐标，而这个加偏并不是线性的加偏，所以各地的偏移情况都会有所不同。而加密后的坐标也常被大家称为“火星坐标系统”。

该坐标系的坐标值为经纬度格式，单位：度。

这里的GCJ02经纬度投影，也就是在WGS84经纬度的基础之上，进行GCJ-02加偏。

### GCJ-02 Web墨卡托投影

改坐标系的坐标值为web墨卡托格式，单位：米

这里的GCJ-02 Web墨卡托投影，是在标准Web默卡托投影的基础之上，进行GCJ-02加偏。

### 百度经纬度投影（BD-09）

BD09经纬度投影属于**百度坐标系**，它是在标准经纬度的基础上进行GCJ-02加偏之后，再加上百度自身的加偏算法，也就是在标准经纬度的基础之上进行了两次加偏。

该坐标系的坐标值为**经纬度格式**，单位为度。

百度地图针对海外地区，提供的是WGS-84坐标系

**如果选择的是百度地图做`WebGIS`开发，很可能陷入对百度地图深度依赖的苦恼**

### DB-09Web墨卡托投影

BD-09 Web 墨卡托属于百度坐标系，它是在标准Web墨卡托投影的基础上进行GCJ-02加偏之后，再加上百度自身的加偏算法，也就是在Web墨卡托的基础之上进行了两次加偏。

该坐标系的坐标值为Web墨卡托格式，单位：米。

### 北京54坐标系

中国成立以后，我国大地测量进入了全面发展时期，在全国范围内开展了正规的，全面的大地测量和测图工作，迫切需要建立一个参心大地坐标系。由于当时的"一边倒"政治趋向，故我国采用了前苏联的克拉索夫斯基椭球参数，并与前苏联1942年坐标系进行联测，通过计算建立了我国大地坐标系，定名为1954年北京坐标系。因此，1954年北京坐标系可以认为是前苏联1942年坐标系的延伸。T.A的原点不在北京而是在前苏联的普尔科沃。

自北京54坐标系统建立以来，在该坐标系内进行了许多地区的局部平差，其成果得到了广泛的应用。但是随着测绘新理论·新技术的不断发展，人们发现该坐标系存在很多缺点，为此，我国在1978年在西安召开了"全国天文大地网整体平差会议"，提出了建立属于我国自己的大地坐标系，即后来的1980西安坐标系。

### 西安80坐标系

1978年4月在西安召开全国天文大地网平差会议，确定重新定位，建立我国新的坐标系。为此有了1980年国家大地坐标系。1980年国家大地坐标系采用地球椭球基本参数为1975年国际大地测量与地球物理联合会第十六届大会推荐的数据，即IAG 75地球椭球体。该坐标系的大地原点设在我国中部的陕西省泾阳县永乐镇，位于西安市西北方向约60公里。

### CGCS2000坐标系

2000中国大地坐标系(China Geodetic Coordinate System 2000，CGCS2000)，又称之为2000国家大地坐标系，是中国新一代大地坐标系，21世纪初已在中国正式实施。

20世纪50年代，为满足测绘工作的迫切需要，中国采用了1954年北京坐标系。1954年之后，随着天文大地网布设任务的完成，通过天文大地网整体平差，于20世纪80年代初中国又建立了1980西安坐标系。1954北京坐标系和1980西安坐标系在中国的经济建设和国防建设中发挥了巨大作用。

随着情况的变化和时间的推移，上述两个以经典测量技术为基础的局部大地坐标系，已经不能适应科学技术特别是空间技术发展，不能适应中国经济建设和国防建设需要。中国大地坐标系的更新换代，是经济建设、国防建设、社会发展和科技发展的客观需要。

以地球质量中心为原点的地心大地坐标系，是21世纪空间时代全球通用的基本大地坐标系。以空间技术为基础的地心大地坐标系，是中国新一代大地坐标系的适宜选择。

地心大地坐标系可以满足大地测量、地球物理、天文、导航和航天应用以及经济、社会发展的广泛需求。


## GPS定位点坐标

原生ios或android库获取的定位点坐标为WGS-84。

百度移动端sdk获取的定位点坐标可以是BD-09或GCJ-02，默认BD-09。

高德移动端sdk，腾讯移动端sdk等获取的定位点坐标为GCJ-02。


举例：我开发了一个地图app，其底图的坐标系是WGS-84，而定位点的获取采用的是高德地图sdk，要保证定位点能在底图上正常显示出来，那么只需对定位点进行GCJ-02到WGS-84坐标系的转换。坐标转换后定位点就可以完美的在移动端或前端地图上叠加显示了

## 转换地图坐标系

[地图坐标转换](http://wandergis.github.io/coordtransform/)

## 瓦片服务

### 什么是瓦片地图？

一幅精确到街道级别的世界地图图片宽度为数以百万计的像素，由于这些数据太大了，从而导致无法一次下载并且在内存里也无法一次都hold住。而浏览器并行获取和显示多张小图片，比获取和显示一张大图片要高效的多，就有了地图瓦片来提高效率。由许多小的正方形的图片组成，这些小图片称作瓦片。

瓦片的大小一般为256*256像素，这些瓦片一个挨一个并列放置以组成一张很大的看似无缝的地图。

### 在线服务

在线服务包括：天地图、谷歌地图、高德地图、百度地图、腾讯地图、Mapbox等

以下URL中：

z：瓦片级别，一般支持0-18，越大越清晰
x：瓦片列号，从东向西（0-360），依次是0,1,2,3,......
y：瓦片行号，从北向南，依次是0,1,2,3,......

#### 不需要token的

**ArcGIS**

街道图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}`

灰色图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}`

深蓝色图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}`

**googleMap**

googleMap咋们用的少，不做解释

**高的地图**

街道：`https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}`，(z>=3 才会有数据)

影像图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}`

#### 需要token的

**Mapbox**

卫星图：`https://a.tiles.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=`

街道图`https://a.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=`

**天地图**

影像图（z>=1）：`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=`

矢量底图（z>=1）：`https://t0.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=9a516b0f2a8179bb68f73172cff4bd22`
