---
title: 互联网地图坐标系
date: 2021-08-25 11:01:11
permalink: /pages/07d42c/
categories:
  - 技术
  - WebGIS
tags:
  - 
---
## 介绍

思考：假设百度地图上存在A点，在高的地图上显示，A点位置为什么发生了偏移？

原因：百度地图基于的坐标系和高德地图的坐标系不一致导致。

目前常用的地理坐标系有以下三种：

### 国际标准坐标系（WGS-84）

该坐标系也叫1984世界大地坐标系

WGS-84为一种国际标准的大地坐标线，是目前GPS全球卫星定位系统使用广泛的坐标系。

### 火星坐标系（GCJ-02）

火星坐标系GCJ-02也叫国测局坐标系

:::warning
国家规定国内出版的各种地图系统（包括电子形式），必须至少采用GCJ-02对地理位置进行首次加密。
:::

国内移动设备中定位获取的坐标数据使用的是GCJ-02坐标系

高德地图、腾讯地图采用的都是GCJ-02坐标系


### 百度坐标系（BD-09）

百度地图标准坐标系，其实BD-09实在GCJ-02的基础上进行了二次加密

百度地图针对海外地区，提供的是WGS-84坐标系

**如果选择的是百度地图做开发，很可能陷入对百度地图深度依赖的苦恼**



## GPS定位点坐标

原生ios或android库获取的定位点坐标为WGS-84。

百度移动sdk获取的定位点坐标可以是BD-09或GCJ-02，默认BD-09。

高德移动sdk，腾讯移动sdk等获取的定位点坐标为GCJ-02。

现在我们基本搞清楚了为什么会产生偏移，要解决偏移，只需要对坐标点进行坐标系转换。

举例：我开发了一个地图app，其底图的坐标系是WGS-84，而定位点的获取采用的是高德地图sdk，要保证定位点能在底图上正常显示出来，那么只需对定位点进行GCJ-02到WGS-84坐标系的转换。坐标转换后定位点就可以完美的在移动端或前端地图上叠加显示了

## 转换地图坐标系

[地图坐标转换](http://wandergis.github.io/coordtransform/)

## 瓦片服务

### 什么是瓦片地图？

一幅精确到街道级别的世界地图图片宽度为数以百万计的像素，由于这些数据太大了，从而导致无法一次下载并且在内存里也无法一次都hold住。而浏览器并行获取和显示多张小图片，比获取和显示一张大图片要高效的多，就有了地图瓦片来提高效率。由许多小的正方形的图片组成，这些小图片称作瓦片。

瓦片的大小一般为256*256像素，这些瓦片一个挨一个并列放置以组成一张很大的看似无缝的地图。

### 在线服务

在线服务包括：天地图、谷歌地图、高德地图、百度地图、腾讯地图、Mapbox等

以下URL中：

z：瓦片级别，一般支持0-18，越大越清晰
x：瓦片列号，从东向西（0-360），依次是0,1,2,3,......
y：瓦片行号，从北向南，依次是0,1,2,3,......

#### 不需要token的

**ArcGIS**

街道图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}`

灰色图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}`

深蓝色图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}`

**googleMap**

googleMap咋们用的少，不做解释

**高的地图**

街道：`https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}`，(z>=3 才会有数据)

影像图：`https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}`


#### 需要token的

**Mapbox**

卫星图：`https://a.tiles.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=`

街道图`https://a.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=`

**天地图**

影像图（z>=1）：`https://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=`


矢量底图（z>=1）：`https://t0.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=9a516b0f2a8179bb68f73172cff4bd22`

