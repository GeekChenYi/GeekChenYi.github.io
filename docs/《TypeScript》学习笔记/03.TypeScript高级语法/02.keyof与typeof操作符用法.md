---
title: keyof与typeof操作符用法
date: 2021-04-15 10:56:02
permalink: /pages/6e11ac76475a2b3e
author: GeekChenYi
categories: 
  - 《TypeScript》学习笔记
  - TypeScript 高级语法
tags: 
  - 
---
# TypeScript高级语法

## keyof

TS允许我们遍历某种类型的属性，并通过 `keyof` 操作符提取其属性的名称。`keyof` 操作符是在 TypeScript 2.1 版本引入的，该操作符可以用于获取某种类型的所有键，其返回类型是联合类型。

```typescript
interface Person {
  name: string;
  age: number;
  location: string;
}

type K1 = keyof Person; // "name" | "age" | "location"
type K2 = keyof Person[];  // number | "length" | "push" | "concat" | ...
type K3 = keyof { [x: string]: Person };  // string | number
```

除了接口外，keyof 也可以用于操作类，比如：

```typescript
class Person {
  name: string = "Semlinker";
}

let sname: keyof Person;
sname = "name";

// 如果更改sname的值

sname = "age" // 报错
```

keyof 操作符除了支持接口和类之外，它也支持基本数据类型：

```typescript
let K1: keyof boolean; // let K1: "valueOf"
let K2: keyof number; // let K2: "toString" | "toFixed" | "toExponential" | ...
let K3: keyof symbol; // let K1: "valueOf"
```

## typeof

typeof 操作符用于获取变量的类型，因此这个操作符的后面接的始终是一个变量，且需要运用到类型定义当中。

typeof和keyof操作符结合在一起使用的例子：

```typescript
const COLORS = {
  red: 'red',
  blue: 'blue'
}

// 首先通过typeof操作符获取color变量的类型，然后通过keyof操作符获取该类型的所有键，
// 即字符串字面量联合类型 'red' | 'blue'

type Colors = keyof typeof COLORS 
let color: Colors;
color = 'red' // Ok
color = 'blue' // Ok

// Type '"yellow"' is not assignable to type '"red" | "blue"'.
color = 'yellow' // Error
```